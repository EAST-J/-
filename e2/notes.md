

背景消除(Background subtraction)：是目标识别的一个预处理步骤，作用是把视频的动态前景从静态背景中抽取出来。背景减除一般存在两种情况，如果具有了背景图像，则只需要从背景中减去新图像就可得到前景对象，但是不一定有背景图像，并且阴影也可能会对上述算法造成影响。对于另一种情况，则只能使用其他算法。

![1](1.png)



在视频序列中使用meanshift算法追踪物体流程：

1.首先在图像上使用矩形框或者圆形框选定一个目标区域
2.计算选定好区域的直方图分布。
3.对下一帧图像b同样计算直方图分布。
4.计算图像b当中与选定区域直方图分布最为相似的区域，使用meanshift算法将选定区域沿着最为相似的部分进行移动。（样例当中使用的是直方图反向投影）
5.重复3到4的过程。



函数注释：

```
cv2.selectROI()：选择感兴趣的区域，返回选择的x，y，w，h的tuple

cv2.calcHist()：计算图像的直方图函数
    imaes:输入的图像
    channels:选择图像的通道
    mask:掩膜，是一个大小和image一样的np数组，其中把需要处理的部分指定为1，不需要处理的部分指定为0，一般设置为None，表示处理整幅图像
    histSize:使用多少个bin，一般为256
    ranges:像素值的范围，一般为[0,255]表示0~255

cv2.calcBackProject(images, channels, hist, ranges, scale, dst=None)
    函数的第一个参数是输入图象，注意加中括号。
    第二个参数是通道。
    第三个参数是图象的直方图。
    第四个是直方图的变化范围。
    第五个是输出反投影的可选比例因子。
```

反向投影：反向投影图中，某一位置（x，y）的像素值 = 原图对应位置（x，y）像素值在原图的总数目。 即若原图中（5，5）位置上像素值为 200，而原图中像素值为 200 的像素点有 500 个，则反向投影图中（5，5）位置上的像素值就设为 500。也就是找到输入图象的每一个像素点的像素值在直方图中对应的概率。